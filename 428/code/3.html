<!doctype html>
<html>
    <head>
        <title>Simple Sign In</title>
    </head>
    <body>
        <h2>Sign In</h2>

        <form id="loginForm">
            <label for="username">Username:</label><br />
            <input
                type="text"
                id="username"
                name="username"
                required
            /><br /><br />

            <label for="password">Password:</label><br />
            <input
                type="password"
                id="password"
                name="password"
                required
            /><br /><br />

            <button type="submit">Sign In</button>
        </form>

        <p id="message" style="color: red"></p>

        <h2>Sign Up</h2>
        <form id="signupForm">
            <label for="newUsername">Username:</label><br />
            <input
                type="text"
                id="newUsername"
                name="newUsername"
                required
            /><br /><br />

            <label for="newPassword">Password:</label><br />
            <input
                type="password"
                id="newPassword"
                name="newPassword"
                required
            /><br /><br />

            <button type="submit">Sign Up</button>
        </form>

        <script>
            // Handle Sign In
            document
                .getElementById("loginForm")
                .addEventListener("submit", function (event) {
                    event.preventDefault(); // stop the form from refreshing the page

                    const username = document.getElementById("username").value;
                    const password = document.getElementById("password").value;

                    const users =
                        JSON.parse(localStorage.getItem("users")) || [];

                    const user = users.find(
                        (user) =>
                            user.username === username &&
                            user.password === password,
                    );

                    if (user) {
                        // Successful sign in
                        document.body.innerHTML = `<h2>Welcome, ${username}!</h2><p>You have successfully signed in.</p>`;
                    } else {
                        // Show error message
                        document.getElementById("message").textContent =
                            "Incorrect username or password. Try again.";
                    }
                });

            // Handle Sign Up
            document
                .getElementById("signupForm")
                .addEventListener("submit", function (event) {
                    event.preventDefault(); // stop the form from refreshing the page

                    const newUsername =
                        document.getElementById("newUsername").value;
                    const newPassword =
                        document.getElementById("newPassword").value;

                    const users =
                        JSON.parse(localStorage.getItem("users")) || [];

                    // Check if username already exists
                    if (users.some((user) => user.username === newUsername)) {
                        document.getElementById("message").textContent =
                            "Username already exists. Try a different one.";
                        return;
                    }

                    // Save the new user to localStorage
                    users.push({
                        username: newUsername,
                        password: newPassword,
                    });
                    localStorage.setItem("users", JSON.stringify(users));

                    document.getElementById("message").textContent =
                        "Sign up successful! You can now sign in.";
                });
        </script>
    </body>
</html>
